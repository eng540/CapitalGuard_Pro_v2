[supervisord]
nodaemon=true
logfile=/dev/null
pidfile=/tmp/supervisord.pid

; -------- API --------
[program:api]
; لاحظ أننا لا نستخدم src. في المسار البايثوني
command=uvicorn capitalguard.interfaces.api.main:app --host 0.0.0.0 --port %(ENV_PORT)s
autostart=true
autorestart=true
startsecs=3
stopasgroup=true
killasgroup=true
stdout_logfile=/dev/stdout
stderr_logfile=/dev/stderr

; -------- Telegram Bot --------
[program:bot]
; يشغّل البوت بطريقة python -m مع الحزمة الصحيحة
command=python -m capitalguard.interfaces.telegram.bot
autostart=true
autorestart=true
startsecs=3
stopasgroup=true
killasgroup=true
stdout_logfile=/dev/stdout
stderr_logfile=/dev/stderr

; -------- (اختياري) Worker/Watcher --------
; اتركه مُعلّقًا إذا لم يكن لديك الموديول
;[program:watcher]
;command=python -m capitalguard.interfaces.worker.watcher
;autostart=true
;autorestart=true
;startsecs=3
;stopasgroup=true
;killasgroup=true
;stdout_logfile=/dev/stdout
;stderr_logfile=/dev/stderr