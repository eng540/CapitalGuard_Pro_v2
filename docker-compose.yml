# docker-compose.yml  

version: "3.9"  
services:  
  db:  
    image: postgres:16  
    environment:  
      POSTGRES_DB: capitalguard  
      POSTGRES_USER: cg  
      POSTGRES_PASSWORD: cgpass  
    ports:  
      - "5432:5432"  
    volumes:  
      - pgdata:/var/lib/postgresql/data  

  api:  
    build:  
      context: .  
      dockerfile: Dockerfile.api  
    environment:  
      DATABASE_URL: postgresql+psycopg://cg:cgpass@db:5432/capitalguard  
      API_KEY: ${API_KEY}  
      # ... باقي متغيرات البيئة  
    ports:  
      - "8000:8000"  
    depends_on: ["db"]  

  # ⛔️ تم حذف خدمة "bot" من هنا ⛔️  

  watcher:  
    build:  
      context: .  
      dockerfile: Dockerfile.watcher  
    environment:  
      DATABASE_URL: postgresql+psycopg://cg:cgpass@db:5432/capitalguard  
      # ... باقي متغيرات البيئة  
    depends_on: ["db"]  

volumes:  
  pgdata: